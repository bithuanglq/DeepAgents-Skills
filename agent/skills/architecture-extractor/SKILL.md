---
name: architecture-extractor
description: SysMLv2架构视图信息提取技能，可从用户输入文本中提取各架构视图（需求图、用例图、活动图、状态机图、模块定义图、内部模块图）相关的信息，根据用户输入路由到相关视图，并根据相关视图要求提取键值对形式的信息，输出JSON格式。
---

# 架构视图信息提取技能
本技能提供标准化流程，将用户输入中的架构视图相关信息提取为JSON对象。

## 使用场景
- 从用户对话中中提取需求图、用例图、活动图、状态机图、模块定义图、内部模块图相关的信息。


## 技能文件结构说明
architecture-extractor/
├── SKILL.md                 # 本文件技能描述
├── requirement_prompt.md    # 需求图信息提取的提示词
├── usecase_prompt.md        # 用例图信息提取的提示词
├── action_prompt.md         # 活动图信息提取的提示词
├── state_prompt.md          # 状态机图信息提取的提示词
├── bdd_prompt.md            # 模块定义图信息提取的提示词
└── ibd_prompt.md            # 内部模块图信息提取的提示词

- 下文中视图名称用变量 [view_name] 统一，需求图对应为 `requirement`, 用例图为 `usecase`, 活动图为 `action`, 状态机图为 `state`, 模块定义图为 `bdd`, 内部模块图为 `ibd`。


## 提取步骤
### 步骤1：分类到各视图
根据用户输入判断所属视图，分类规则如下：

| 序号 | 分类决策规则                                             | 分类到的视图                       |
|------|----------------------------------------------------------|------------------------------------|
| 1    | 含系统需求/约束（例："电池续航≥8小时"、"符合ISO安全标准"） | 需求图 + 用例图                    |
| 2    | 含参与者/利益攸关者/用户目标                                   | 用例图                             |
| 3    | 含活动定义/活动关系                                      | 活动图                             |
| 4    | 含活动间数据流（关键词：传递、流向、输入/输出至...） | 活动图 + 内部模块图                |
| 5    | 含部件连接关系（关键词：连接至、接口）     |  内部模块图            |
| 6    | 含部件定义/组成（关键词：由...组成）                                       | 模块定义图 + 内部模块图                         |
| 7    | 含状态定义/状态转换逻辑                                      | 状态机图                           |

### 步骤2：委派子智能体并规定输入输出路径
1. 在委派子智能体之前，在指定的`/fs/`目录下，需要先创建存放结果的文件：
```bash
mkdir -p architecture_result
```
这个可以确保生成的结果可以归类在同一个文件夹。

2. 对于分类到的 n 个视图，必须对每个视图调用 `task` 工具委派一个子智能体，子智能体满足：
- 输入为用户问题
- 子智能体类型为 `[view_name]-extractor`, 需求图为 `requirement-extractor`，用例图为 `usecase-extractor`，活动图为 `action-extractor`，状态机图为 `state-extractor`，模块定义图为 `bdd-extractor`，内部模块图为 `ibd-extractor`。
- **提取规则上，严格按照各子智能体自带提示词，不施加额外指令**
- 输出结果使用 `write_file` 工具写入到 `architecture_result/[view_name]_result.md` 文件




## 主智能体可用工具
- `task`  —— 用于委派子智能体，子智能体已预配置对应视图的提示词

## 子智能体可用工具
- `write_file` —— 用于将提取结果写入文件`architecture_result/[view_name]_result.md`

